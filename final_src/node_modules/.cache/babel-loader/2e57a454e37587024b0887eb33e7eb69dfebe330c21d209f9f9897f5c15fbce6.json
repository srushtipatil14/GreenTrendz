{"ast":null,"code":"import axios from'axios';import React from'react';import ReportsDisplay from'./ReportsDisplay';// Import the ReportsDisplay component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UploadReports=()=>{const[file,setFile]=useState(null);const[errorMessage,setErrorMessage]=useState('');const[uploading,setUploading]=useState(false);const[uploadedReports,setUploadedReports]=useState([]);const[showReports,setShowReports]=useState(false);// State to control showing reports\n// Function to handle file upload\nconst handleFileChange=e=>{const selectedFile=e.target.files[0];setFile(selectedFile);setErrorMessage('');};// Function to handle file upload to the backend\nconst handleSubmit=async e=>{e.preventDefault();if(!file){setErrorMessage('Please select a file to upload.');return;}const formData=new FormData();formData.append('file',file);try{setUploading(true);const response=await axios.post('http://localhost:5000/api/upload-report',formData,{headers:{'Content-Type':'multipart/form-data'}});console.log('Upload response:',response.data);setUploadedReports(prevReports=>[...prevReports,response.data]);// Add uploaded report to the list\n}catch(error){console.error('Error uploading the report:',error);setErrorMessage('Error uploading the report. Please try again.');}finally{setUploading(false);}};// Function to fetch reports from the backend\nconst fetchReports=async()=>{try{const response=await axios.get('http://localhost:5000/api/get-reports');// Existing route\nsetUploadedReports(response.data);// Store fetched reports in state\n}catch(error){console.error('Error fetching reports:',error);}};return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.title,children:\"Upload ESG Report\"}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{style:styles.errorMessage,children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:styles.form,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange,style:styles.fileInput}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:uploading,style:styles.button,children:uploading?'Uploading...':'Upload ESG Report'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{fetchReports();setShowReports(!showReports);},children:showReports?'Hide Reports':'Show Reports'}),showReports&&/*#__PURE__*/_jsx(ReportsDisplay,{reports:uploadedReports})]});};// Styles for the component\nconst styles={container:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',padding:'20px',backgroundColor:'#e9f7ef',borderRadius:'8px',boxShadow:'0 4px 8px rgba(0,0,0,0.1)',maxWidth:'500px',margin:'auto',fontFamily:'Arial, sans-serif'},title:{color:'#2c3e50',marginBottom:'20px',fontSize:'24px'},errorMessage:{color:'#e74c3c',marginBottom:'15px'},form:{display:'flex',flexDirection:'column',width:'100%'},fileInput:{marginBottom:'15px',padding:'10px',border:'1px solid #b2e0c7',borderRadius:'4px',fontSize:'16px',backgroundColor:'#ffffff'},button:{padding:'10px',border:'none',borderRadius:'4px',backgroundColor:'#66bb6a',color:'#fff',fontSize:'16px',cursor:'pointer',transition:'background-color 0.3s'}};export default UploadReports;","map":{"version":3,"names":["axios","React","ReportsDisplay","jsx","_jsx","jsxs","_jsxs","UploadReports","file","setFile","useState","errorMessage","setErrorMessage","uploading","setUploading","uploadedReports","setUploadedReports","showReports","setShowReports","handleFileChange","e","selectedFile","target","files","handleSubmit","preventDefault","formData","FormData","append","response","post","headers","console","log","data","prevReports","error","fetchReports","get","style","styles","container","children","title","onSubmit","form","type","onChange","fileInput","disabled","button","onClick","reports","display","flexDirection","alignItems","justifyContent","padding","backgroundColor","borderRadius","boxShadow","maxWidth","margin","fontFamily","color","marginBottom","fontSize","width","border","cursor","transition"],"sources":["/Users/srushtipatil/Downloads/final_src/src/components/UploadReports.js"],"sourcesContent":["import axios from 'axios';\nimport React from 'react';\nimport ReportsDisplay from './ReportsDisplay'; // Import the ReportsDisplay component\n\nconst UploadReports = () => {\n  const [file, setFile] = useState(null);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const [uploadedReports, setUploadedReports] = useState([]);\n  const [showReports, setShowReports] = useState(false); // State to control showing reports\n\n  // Function to handle file upload\n  const handleFileChange = (e) => {\n    const selectedFile = e.target.files[0];\n    setFile(selectedFile);\n    setErrorMessage('');\n  };\n\n  // Function to handle file upload to the backend\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!file) {\n      setErrorMessage('Please select a file to upload.');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      setUploading(true);\n      const response = await axios.post('http://localhost:5000/api/upload-report', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      console.log('Upload response:', response.data);\n      setUploadedReports((prevReports) => [...prevReports, response.data]); // Add uploaded report to the list\n    } catch (error) {\n      console.error('Error uploading the report:', error);\n      setErrorMessage('Error uploading the report. Please try again.');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Function to fetch reports from the backend\n  const fetchReports = async () => {\n    try {\n      const response = await axios.get('http://localhost:5000/api/get-reports'); // Existing route\n      setUploadedReports(response.data); // Store fetched reports in state\n    } catch (error) {\n      console.error('Error fetching reports:', error);\n    }\n  };\n\n  return (\n    <div style={styles.container}>\n      <h2 style={styles.title}>Upload ESG Report</h2>\n      {errorMessage && <p style={styles.errorMessage}>{errorMessage}</p>}\n\n      <form onSubmit={handleSubmit} style={styles.form}>\n        <input\n          type=\"file\"\n          onChange={handleFileChange}\n          style={styles.fileInput}\n        />\n        <button type=\"submit\" disabled={uploading} style={styles.button}>\n          {uploading ? 'Uploading...' : 'Upload ESG Report'}\n        </button>\n      </form>\n\n      {/* Button to show or hide the reports */}\n      <button onClick={() => { fetchReports(); setShowReports(!showReports); }}>\n        {showReports ? 'Hide Reports' : 'Show Reports'}\n      </button>\n\n      {/* Conditionally render the reports display */}\n      {showReports && <ReportsDisplay reports={uploadedReports} />}\n    </div>\n  );\n};\n\n// Styles for the component\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: '20px',\n    backgroundColor: '#e9f7ef',\n    borderRadius: '8px',\n    boxShadow: '0 4px 8px rgba(0,0,0,0.1)',\n    maxWidth: '500px',\n    margin: 'auto',\n    fontFamily: 'Arial, sans-serif',\n  },\n  title: {\n    color: '#2c3e50',\n    marginBottom: '20px',\n    fontSize: '24px',\n  },\n  errorMessage: {\n    color: '#e74c3c',\n    marginBottom: '15px',\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n  },\n  fileInput: {\n    marginBottom: '15px',\n    padding: '10px',\n    border: '1px solid #b2e0c7',\n    borderRadius: '4px',\n    fontSize: '16px',\n    backgroundColor: '#ffffff',\n  },\n  button: {\n    padding: '10px',\n    border: 'none',\n    borderRadius: '4px',\n    backgroundColor: '#66bb6a',\n    color: '#fff',\n    fontSize: '16px',\n    cursor: 'pointer',\n    transition: 'background-color 0.3s',\n  },\n};\n\nexport default UploadReports;  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}