{"ast":null,"code":"import axios from'axios';import{BarElement,CategoryScale,Chart,Legend,LinearScale,Tooltip}from'chart.js';import React from'react';import EsgDataVisualization from'./EsgDataVisualization';// Import the chart component\n// Register the required components\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";Chart.register(BarElement,CategoryScale,LinearScale,Tooltip,Legend);const FileUploads=()=>{const[file,setFile]=useState(null);const[message,setMessage]=useState('');const[loading,setLoading]=useState(false);const[esgData,setEsgData]=useState([]);// State to hold ESG data for visualization\nconst handleFileChange=e=>{setFile(e.target.files[0]);};const handleUpload=async e=>{e.preventDefault();if(!file){setMessage('Please select a CSV or Excel file to upload.');return;}const formData=new FormData();formData.append('file',file);setLoading(true);try{const response=await axios.post('http://localhost:5000/api/uploads',formData,{headers:{'Content-Type':'multipart/form-data'}});setMessage(response.data.message);const uploadedFileData=response.data.data;// Assuming the backend returns the parsed data\nsetEsgData(uploadedFileData);// Set the parsed ESG data with `extractedMetrics`\nsetFile(null);}catch(error){console.error('Error uploading file:',error);setMessage('Error uploading CSV/Excel file. Please try again.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.heading,children:\"Upload CSV/Excel File\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpload,style:styles.form,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange,accept:\".csv, .xlsx\",style:styles.input}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:styles.button,children:loading?'Uploading...':'Upload File'})]}),message&&/*#__PURE__*/_jsx(\"p\",{style:styles.message,children:message}),esgData.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"visualization-container\",style:styles.visualizationContainer,children:[/*#__PURE__*/_jsx(EsgDataVisualization,{esgData:esgData}),\" \"]})]});};const styles={container:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',height:'100vh',backgroundColor:'#e6f7e9',fontFamily:\"'Arial', sans-serif\"},heading:{fontSize:'2rem',color:'#2d6a4f',marginBottom:'20px'},form:{display:'flex',flexDirection:'column',alignItems:'center'},input:{marginBottom:'15px',padding:'10px',borderRadius:'5px',border:'1px solid #95d5b2'},button:{padding:'10px 20px',borderRadius:'5px',backgroundColor:'#40916c',color:'#fff',border:'none',cursor:'pointer',transition:'background-color 0.3s'},message:{marginTop:'15px',color:'#1b4332'},visualizationContainer:{marginTop:'20px',width:'80%'// Adjust as needed\n}};export default FileUploads;","map":{"version":3,"names":["axios","BarElement","CategoryScale","Chart","Legend","LinearScale","Tooltip","React","EsgDataVisualization","jsx","_jsx","jsxs","_jsxs","register","FileUploads","file","setFile","useState","message","setMessage","loading","setLoading","esgData","setEsgData","handleFileChange","e","target","files","handleUpload","preventDefault","formData","FormData","append","response","post","headers","data","uploadedFileData","error","console","style","styles","container","children","heading","onSubmit","form","type","onChange","accept","input","disabled","button","length","className","visualizationContainer","display","flexDirection","alignItems","justifyContent","height","backgroundColor","fontFamily","fontSize","color","marginBottom","padding","borderRadius","border","cursor","transition","marginTop","width"],"sources":["/Users/srushtipatil/Downloads/final_src/src/components/FileUploads.js"],"sourcesContent":["import axios from 'axios';\nimport { BarElement, CategoryScale, Chart, Legend, LinearScale, Tooltip } from 'chart.js';\nimport React from 'react';\nimport EsgDataVisualization from './EsgDataVisualization'; // Import the chart component\n\n// Register the required components\nChart.register(BarElement, CategoryScale, LinearScale, Tooltip, Legend);\n\nconst FileUploads = () => {\n    const [file, setFile] = useState(null);\n    const [message, setMessage] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [esgData, setEsgData] = useState([]); // State to hold ESG data for visualization\n\n    const handleFileChange = (e) => {\n        setFile(e.target.files[0]);\n    };\n\n    const handleUpload = async (e) => {\n        e.preventDefault();\n\n        if (!file) {\n            setMessage('Please select a CSV or Excel file to upload.');\n            return;\n        }\n\n        const formData = new FormData();\n        formData.append('file', file);\n\n        setLoading(true);\n\n        try {\n            const response = await axios.post('http://localhost:5000/api/uploads', formData, {\n                headers: { 'Content-Type': 'multipart/form-data' },\n            });\n            setMessage(response.data.message);\n            const uploadedFileData = response.data.data; // Assuming the backend returns the parsed data\n            setEsgData(uploadedFileData); // Set the parsed ESG data with `extractedMetrics`\n            setFile(null);\n        } catch (error) {\n            console.error('Error uploading file:', error);\n            setMessage('Error uploading CSV/Excel file. Please try again.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div style={styles.container}>\n            <h2 style={styles.heading}>Upload CSV/Excel File</h2>\n            <form onSubmit={handleUpload} style={styles.form}>\n                <input \n                    type=\"file\" \n                    onChange={handleFileChange}\n                    accept=\".csv, .xlsx\" \n                    style={styles.input}\n                />\n                <button \n                    type=\"submit\" \n                    disabled={loading} \n                    style={styles.button}\n                >\n                    {loading ? 'Uploading...' : 'Upload File'}\n                </button>\n            </form>\n\n            {message && <p style={styles.message}>{message}</p>}\n\n            {/* Pass ESG data to EsgDataVisualization */}\n            {esgData.length > 0 && (\n                <div className=\"visualization-container\" style={styles.visualizationContainer}>\n                    <EsgDataVisualization esgData={esgData} /> {/* Render the chart with passed esgData */}\n                </div>\n            )}\n        </div>\n    );\n};\n\nconst styles = {\n    container: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100vh',\n        backgroundColor: '#e6f7e9',\n        fontFamily: \"'Arial', sans-serif\",\n    },\n    heading: {\n        fontSize: '2rem',\n        color: '#2d6a4f',\n        marginBottom: '20px',\n    },\n    form: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    input: {\n        marginBottom: '15px',\n        padding: '10px',\n        borderRadius: '5px',\n        border: '1px solid #95d5b2',\n    },\n    button: {\n        padding: '10px 20px',\n        borderRadius: '5px',\n        backgroundColor: '#40916c',\n        color: '#fff',\n        border: 'none',\n        cursor: 'pointer',\n        transition: 'background-color 0.3s',\n    },\n    message: {\n        marginTop: '15px',\n        color: '#1b4332',\n    },\n    visualizationContainer: {\n        marginTop: '20px',\n        width: '80%', // Adjust as needed\n    },\n};\n\nexport default FileUploads;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}